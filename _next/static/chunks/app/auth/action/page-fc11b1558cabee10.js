(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9794],{12176:function(e,t,r){Promise.resolve().then(r.bind(r,89285))},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(43168).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},89285:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var s=r(57437),i=r(2265),a=r(99376),n=r(29501),o=r(13590),l=r(91115),c=r(37974),d=r(43301),u=r(79820),m=r(12381),f=r(40279),p=r(50935),x=r(51817),h=r(99388),g=r(41671),v=r(23340),j=r(33145),y=r(71837);let b=l.Ry({password:l.Z_().min(10,{message:"Password must be at least 10 characters long."}).regex(/[A-Z]/,{message:"Must contain at least one uppercase letter."}).regex(/[a-z]/,{message:"Must contain at least one lowercase letter."}).regex(/[0-9]/,{message:"Must contain at least one number."}).regex(/[^A-Za-z0-9]/,{message:"Must contain at least one special character."}),confirmPassword:l.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]}),w=l.Ry({email:l.Z_().email({message:"Please enter a valid email address."})}),N=()=>{let{toast:e}=(0,v.pm)(),t=(0,a.useRouter)(),r=(0,n.cI)({resolver:(0,o.F)(w)}),i=async r=>{try{let s=await fetch("".concat(y.C,"/api/resend-verification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await s.json();if(s.ok)e({title:"Email Sent",description:i.message}),t.push("/");else{let t=i.error;t&&t.toLowerCase().includes("already verified")&&(t="This email is already verified. Please log in."),e({variant:"destructive",title:"Failed to send",description:t})}}catch(t){e({variant:"destructive",title:"Network Error",description:"Could not connect to the server."})}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Link Expired or Invalid"}),(0,s.jsx)(u.SZ,{children:"This verification link has expired. Please enter your email to receive a new one."})]}),(0,s.jsx)(u.aY,{children:(0,s.jsx)(p.l0,{...r,children:(0,s.jsxs)("form",{onSubmit:r.handleSubmit(i),className:"space-y-4",children:[(0,s.jsx)(p.Wi,{control:r.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Email"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{type:"email",placeholder:"you@example.com",...t})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsxs)(m.z,{type:"submit",className:"w-full",disabled:r.formState.isSubmitting,children:[r.formState.isSubmitting&&(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Resend Verification Link"]})]})})})]})},S=()=>{let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{toast:r}=(0,v.pm)(),{auth:l}=(0,c.h)(),[j,w]=i.useState(null),[S,k]=i.useState(null),[C,E]=i.useState(!0),[I,T]=i.useState(null),[P,_]=i.useState(!1),[R,A]=i.useState(null),[O,z]=i.useState(!1),[Z,F]=i.useState(!1),[M,V]=i.useState(!1),[D,G]=i.useState(""),[Y,L]=i.useState(!1),[W,X]=i.useState(null),[J,q]=i.useState(""),B=(0,n.cI)({resolver:(0,o.F)(b)});i.useEffect(()=>{let e=t.getAll("mode")[0],r=t.get("oobCode");if(w(e),k(r),!l||!e||!r){l||E(!1),e&&r||(T("This link is invalid, expired, or has already been used. Please log in or request a new verification email."),E(!1));return}(async()=>{try{let e=await (0,d.bX)(l,r),{operation:t}=e,{email:s}=e.data;if(!s)throw Error("Invalid action code: email is missing.");if("VERIFY_EMAIL"===t)await (0,d.iA)(l,r),z(!0),A({email:s,from:"verifyEmail"});else if("PASSWORD_RESET"===t)await (0,d.TX)(l,r),A({email:s,from:"resetPassword"});else throw Error("Unsupported action.")}catch(e){"auth/invalid-action-code"===e.code?_(!0):T("An unexpected error occurred. Please try again.")}finally{E(!1)}})()},[t,l]);let H=async e=>{if(l&&S)try{await (0,d.LG)(l,S,e.password),z(!0)}catch(e){T("Failed to reset password. The link may have expired. Please try again.")}};if(C)return(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Verifying link..."})]});if(P)return(0,s.jsx)(N,{});if(I)return(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(h.Z,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Action Failed"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:I}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,s.jsx)(m.z,{onClick:()=>e.push("/"),variant:"secondary",children:"Go to Homepage"}),(0,s.jsx)(m.z,{onClick:()=>e.push("/?action=login"),variant:"default",children:"Go to Login"}),(0,s.jsx)(m.z,{onClick:()=>_(!0),variant:"outline",children:"Resend Verification Email"})]})]});if(O){if((null==R?void 0:R.from)==="verifyEmail")return F(!0),(async()=>{try{let t=await fetch("".concat(y.C,"/api/check-profile"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:R.email})}),s=await t.json();t.ok&&s.profileComplete?(r({title:"Email Verified!",description:"Your account is now active. You can log in."}),e.push("/?action=login&from=verification_success")):s.token?(r({title:"Email Verified!",description:"Please complete your profile to continue."}),e.push("/complete-profile?token=".concat(s.token))):(r({title:"Email Verified!",description:"Please complete your profile to continue."}),e.push("/"))}catch(t){r({title:"Email Verified!",description:"Please log in."}),e.push("/?action=login&from=verification_success")}finally{F(!1)}})(),null;if((null==R?void 0:R.from)==="resetPassword")return r({title:"Password Changed!",description:"Your password has been reset successfully. Please log in."}),e.push("/?action=login&from=reset_success"),null}return Z?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Redirecting..."})]}):"resetPassword"===j&&R?(0,s.jsxs)("div",{children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Reset Your Password"}),(0,s.jsxs)(u.SZ,{children:["Enter a new password for ",R.email]})]}),(0,s.jsx)(u.aY,{children:(0,s.jsx)(p.l0,{...B,children:(0,s.jsxs)("form",{onSubmit:B.handleSubmit(H),className:"space-y-4",children:[(0,s.jsx)(p.Wi,{control:B.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"New Password"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{type:"password",...t})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(p.Wi,{control:B.control,name:"confirmPassword",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Confirm New Password"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{type:"password",...t})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsxs)(m.z,{type:"submit",className:"w-full",disabled:B.formState.isSubmitting,children:[B.formState.isSubmitting&&(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save New Password"]})]})})})]}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Check Email Verification"}),(0,s.jsx)(u.SZ,{children:"Enter your email to check if it has been verified."})]}),(0,s.jsxs)(u.aY,{children:[(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),L(!0),X(null),q("");try{let e=await fetch("".concat(y.C,"/api/check-verification-status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:D})}),t=await e.json();e.ok&&t.email_verified?X("verified"):e.ok&&!t.email_verified?X("not_verified"):(X("error"),q(t.error||"Unknown error"))}catch(e){X("error"),q("Network error")}finally{L(!1)}},className:"space-y-4",children:[(0,s.jsx)(f.I,{type:"email",placeholder:"you@example.com",value:D,onChange:e=>G(e.target.value),required:!0}),(0,s.jsx)(m.z,{type:"submit",className:"w-full",disabled:Y,children:Y?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):"Check Verification Status"})]}),"verified"===W&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(g.Z,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),(0,s.jsx)("p",{className:"font-semibold",children:"Your email is verified! Please log in."}),(0,s.jsx)(m.z,{className:"mt-2",onClick:()=>e.push("/?action=login"),children:"Go to Login"})]}),"not_verified"===W&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(h.Z,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),(0,s.jsx)("p",{className:"font-semibold",children:"Your email is not verified yet."}),(0,s.jsx)(m.z,{className:"mt-2",onClick:()=>_(!0),children:"Resend Verification Email"})]}),"error"===W&&(0,s.jsx)("div",{className:"mt-4 text-destructive",children:J}),(0,s.jsx)(m.z,{onClick:()=>e.push("/"),className:"mt-4",variant:"secondary",children:"Go to Homepage"})]})]})};function k(){let e=(0,a.useRouter)();return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer mb-8",onClick:()=>e.push("/"),children:[(0,s.jsx)("div",{className:"logo-container",style:{"--logo-size":"2.5rem"},children:(0,s.jsx)(j.default,{src:"/logo.png",alt:"Hustloop Logo",width:40,height:40,className:"h-10 w-10 logo-image"})}),(0,s.jsxs)("span",{className:"font-headline text-2xl",style:{color:"#facc15"},children:["hustl",(0,s.jsx)("strong",{className:"text-3xl align-middle font-bold",children:"âˆž"}),"p"]})]}),(0,s.jsx)(u.Zb,{className:"w-full max-w-md",children:(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,s.jsx)(x.Z,{className:"h-12 w-12 animate-spin text-primary"})}),children:(0,s.jsx)(S,{})})})]})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(57437),i=r(2265),a=r(37053),n=r(90535),o=r(93448);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:i,size:n,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:i,size:n,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var s=r(57437),i=r(2265),a=r(93448);let n=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...i})});n.displayName="Card";let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...i})});o.displayName="CardHeader";let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...i})});l.displayName="CardTitle";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...i})});c.displayName="CardDescription";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...i})});d.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...i})});u.displayName="CardFooter"},50935:function(e,t,r){"use strict";r.d(t,{l0:function(){return u},NI:function(){return v},Wi:function(){return f},xJ:function(){return h},lX:function(){return g},zG:function(){return j}});var s=r(57437),i=r(2265),a=r(37053),n=r(29501),o=r(93448),l=r(6394);let c=(0,r(90535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,o.cn)(c(),r),...i})});d.displayName=l.f.displayName;let u=n.RV,m=i.createContext({}),f=e=>{let{...t}=e;return(0,s.jsx)(m.Provider,{value:{name:t.name},children:(0,s.jsx)(n.Qr,{...t})})},p=()=>{let e=i.useContext(m),t=i.useContext(x),{getFieldState:r,formState:s}=(0,n.Gc)(),a=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},x=i.createContext({}),h=i.forwardRef((e,t)=>{let{className:r,...a}=e,n=i.useId();return(0,s.jsx)(x.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...a})})});h.displayName="FormItem";let g=i.forwardRef((e,t)=>{let{className:r,...i}=e,{error:a,formItemId:n}=p();return(0,s.jsx)(d,{ref:t,className:(0,o.cn)(a&&"text-destructive",r),htmlFor:n,...i})});g.displayName="FormLabel";let v=i.forwardRef((e,t)=>{let{...r}=e,{error:i,formItemId:n,formDescriptionId:o,formMessageId:l}=p();return(0,s.jsx)(a.g7,{ref:t,id:n,"aria-describedby":i?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!i,...r})});v.displayName="FormControl",i.forwardRef((e,t)=>{let{className:r,...i}=e,{formDescriptionId:a}=p();return(0,s.jsx)("p",{ref:t,id:a,className:(0,o.cn)("text-sm text-muted-foreground",r),...i})}).displayName="FormDescription";let j=i.forwardRef((e,t)=>{var r;let{className:i,children:a,...n}=e,{error:l,formMessageId:c}=p(),d=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):a;return d?(0,s.jsx)("p",{ref:t,id:c,className:(0,o.cn)("text-sm font-medium text-destructive",i),...n,children:d}):null});j.displayName="FormMessage"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var s=r(57437),i=r(2265),a=r(93448);let n=i.forwardRef((e,t)=>{let{className:r,type:i,...n}=e;return(0,s.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},37974:function(e,t,r){"use strict";let s;r.d(t,{h:function(){return o}});var i=r(2265),a=r(43301),n=r(738);function o(){let[e,t]=(0,i.useState)(null),[r,n]=(0,i.useState)(!0),o=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(o.current||(o.current=(0,a.v0)(s)),!o.current)return;let e=(0,a.Aj)(o.current,e=>{t(e),n(!1)});return()=>e()},[]),{user:e,loading:r,auth:o.current}}s=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyBw7SxFgACSo_BqMiwpl_Wmha1yljkhVhc",authDomain:"hustloop.firebaseapp.com",projectId:"hustloop",storageBucket:"hustloop.firebasestorage.app",messagingSenderId:"1059618765323",appId:"1:1059618765323:web:443c3e836dc18dd5dba50e",measurementId:"G-G1YRLQ771T"})},23340:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var s=r(2265);let i=0,a=new Map,n=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},71837:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});let s="https://api.hustloop.com"},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(61994),i=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,s.W)(t))}}},function(e){e.O(0,[9990,8415,2984,3145,3761,2971,2117,1744],function(){return e(e.s=12176)}),_N_E=e.O()}]);