(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9794],{12176:function(e,t,r){Promise.resolve().then(r.bind(r,89285))},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(43168).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},89285:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var s=r(57437),n=r(2265),a=r(99376),i=r(29501),o=r(13590),l=r(91115),c=r(43301),d=r(37974),u=r(79820),m=r(12381),f=r(40279),p=r(50935),x=r(51817),h=r(99388),g=r(41671),v=r(23340),j=r(71837);let y=l.Ry({password:l.Z_().min(10,"Password must be at least 10 characters long.").regex(/[A-Z]/,"Must contain at least one uppercase letter.").regex(/[a-z]/,"Must contain at least one lowercase letter.").regex(/[0-9]/,"Must contain at least one number.").regex(/[^A-Za-z0-9]/,"Must contain at least one special character."),confirmPassword:l.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]}),w=l.Ry({email:l.Z_().email({message:"Please enter a valid email address."})}),N=()=>{let{toast:e}=(0,v.pm)(),t=(0,a.useRouter)(),r=(0,i.cI)({resolver:(0,o.F)(w)}),n=async r=>{try{let s=await fetch("".concat(j.C,"/api/resend-verification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await s.json();if(s.ok)e({title:"Email Sent",description:n.message}),t.push("/");else{let t=n.error;(null==t?void 0:t.toLowerCase().includes("already verified"))&&(t="This email is already verified. Please log in."),e({variant:"destructive",title:"Failed",description:t})}}catch(t){e({variant:"destructive",title:"Network Error"})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Link Expired or Invalid"}),(0,s.jsx)(u.SZ,{children:"This link has expired. Enter your email to receive a new one."})]}),(0,s.jsx)(u.aY,{children:(0,s.jsx)(p.l0,{...r,children:(0,s.jsxs)("form",{onSubmit:r.handleSubmit(n),className:"space-y-4",children:[(0,s.jsx)(p.Wi,{control:r.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Email"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{type:"email",placeholder:"you@example.com",...t})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsxs)(m.z,{type:"submit",disabled:r.formState.isSubmitting,className:"w-full",children:[r.formState.isSubmitting&&(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Resend Verification Link"]})]})})})]})},b=()=>{let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{auth:r}=(0,d.h)(),{toast:l}=(0,v.pm)(),[w,b]=n.useState(null),[S,E]=n.useState(null),[I,_]=n.useState(!0),[T,R]=n.useState(null),[C,k]=n.useState(!1),[A,P]=n.useState(!1),[F,O]=n.useState(null),[Z,D]=n.useState(!1),z=(0,i.cI)({resolver:(0,o.F)(y)}),M=async e=>{if(r&&S)try{await (0,c.LG)(r,S,e.password),k(!0)}catch(e){R("Failed to reset password. Try again.")}};return(n.useEffect(()=>{let e=t.get("mode"),s=t.get("oobCode");r&&e&&s&&(b(e),E(s),(async()=>{try{let e=await (0,c.bX)(r,s),{operation:t}=e,{email:n}=e.data;if(!n)throw Error("Email missing in action.");if("VERIFY_EMAIL"===t)await (0,c.iA)(r,s),k(!0),O({email:n,from:"verifyEmail"});else if("PASSWORD_RESET"===t)await (0,c.TX)(r,s),O({email:n,from:"resetPassword"});else throw Error("Unsupported action.")}catch(e){"auth/invalid-action-code"===e.code?D(!0):R(function(e,t){switch(e){case"auth/invalid-action-code":case"invalid-action-code":return"This verification link is invalid or has already been used.";case"auth/expired-action-code":case"expired-action-code":return"This verification link has expired. Please request a new one.";case"auth/user-not-found":case"user-not-found":return"No account found with this email.";case"auth/too-many-requests":case"too-many-requests":return"Too many attempts. Please try again later.";default:return t}}(e.code,e.message))}finally{_(!1)}})())},[r,t]),n.useEffect(()=>{if(C&&(null==F?void 0:F.from)==="verifyEmail"){let t=localStorage.getItem("token");t?(async()=>{try{let r=await fetch("".concat(j.C,"/api/check-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),s=await r.json();r.ok&&s.profile_complete?(l({title:"Email Verified!",description:"You can now log in."}),e.push("/?action=login&from=verification_success")):s.token?(l({title:"Verified!",description:"Complete your profile."}),e.push("/complete-profile?token=".concat(s.token))):(l({title:"Verified!",description:"Proceed to login."}),e.push("/"))}catch(e){P(!0)}})():P(!0)}},[C,F,e,l]),I)?(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsx)(x.Z,{className:"h-10 w-10 animate-spin mx-auto mb-4 text-primary"}),(0,s.jsx)("p",{children:"Verifying..."})]}):Z?(0,s.jsx)(N,{}):T?(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsx)(h.Z,{className:"h-10 w-10 text-red-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"font-bold",children:T}),(0,s.jsx)(m.z,{onClick:()=>e.push("/"),className:"mt-4",children:"Go to Homepage"})]}):A?(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsx)(g.Z,{className:"h-10 w-10 text-green-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"font-bold",children:"Email Verified!"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"You can now log in."}),(0,s.jsx)(m.z,{className:"mt-4",onClick:()=>e.push("/?action=login"),children:"Go to Login"})]}):C&&(null==F?void 0:F.from)==="resetPassword"?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(g.Z,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Password Updated!"}),(0,s.jsx)("p",{className:"mb-6",children:"Your password has been reset successfully. You can now log in with your new password."}),(0,s.jsx)(m.z,{onClick:()=>e.push("/?action=login"),children:"Go to Login"})]}):"resetPassword"===w&&F?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Reset Your Password"}),(0,s.jsxs)(u.SZ,{children:["Enter a new password for ",F.email]})]}),(0,s.jsx)(u.aY,{children:(0,s.jsx)(p.l0,{...z,children:(0,s.jsxs)("form",{onSubmit:z.handleSubmit(M),className:"space-y-4",children:[(0,s.jsx)(p.Wi,{control:z.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"New Password"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{type:"password",...t})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(p.Wi,{control:z.control,name:"confirmPassword",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Confirm Password"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{type:"password",...t})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsxs)(m.z,{type:"submit",disabled:z.formState.isSubmitting,className:"w-full",children:[z.formState.isSubmitting&&(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})})})]}):(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsxs)(u.Ol,{children:[(0,s.jsx)(u.ll,{children:"Check or Resend Email Verification"}),(0,s.jsx)(u.SZ,{children:"Enter your email to check verification status or resend the link."})]}),(0,s.jsxs)(u.aY,{children:[(0,s.jsx)("p",{className:"text-muted",children:"This is the fallback screen."}),(0,s.jsx)(m.z,{className:"mt-4",onClick:()=>e.push("/"),children:"Go to Homepage"})]})]})};function S(){let e=(0,a.useRouter)();return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 cursor-pointer mb-8",onClick:()=>e.push("/"),children:(0,s.jsx)("span",{className:"font-headline text-2xl text-yellow-400",children:"hustlâˆžp"})}),(0,s.jsx)(u.Zb,{className:"w-full max-w-md",children:(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"p-12 flex justify-center",children:(0,s.jsx)(x.Z,{className:"h-10 w-10 animate-spin text-primary"})}),children:(0,s.jsx)(b,{})})})]})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(57437),n=r(2265),a=r(37053),i=r(90535),o=r(93448);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var s=r(57437),n=r(2265),a=r(93448);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},50935:function(e,t,r){"use strict";r.d(t,{l0:function(){return u},NI:function(){return v},Wi:function(){return f},xJ:function(){return h},lX:function(){return g},zG:function(){return j}});var s=r(57437),n=r(2265),a=r(37053),i=r(29501),o=r(93448),l=r(6394);let c=(0,r(90535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,o.cn)(c(),r),...n})});d.displayName=l.f.displayName;let u=i.RV,m=n.createContext({}),f=e=>{let{...t}=e;return(0,s.jsx)(m.Provider,{value:{name:t.name},children:(0,s.jsx)(i.Qr,{...t})})},p=()=>{let e=n.useContext(m),t=n.useContext(x),{getFieldState:r,formState:s}=(0,i.Gc)(),a=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},x=n.createContext({}),h=n.forwardRef((e,t)=>{let{className:r,...a}=e,i=n.useId();return(0,s.jsx)(x.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...a})})});h.displayName="FormItem";let g=n.forwardRef((e,t)=>{let{className:r,...n}=e,{error:a,formItemId:i}=p();return(0,s.jsx)(d,{ref:t,className:(0,o.cn)(a&&"text-destructive",r),htmlFor:i,...n})});g.displayName="FormLabel";let v=n.forwardRef((e,t)=>{let{...r}=e,{error:n,formItemId:i,formDescriptionId:o,formMessageId:l}=p();return(0,s.jsx)(a.g7,{ref:t,id:i,"aria-describedby":n?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!n,...r})});v.displayName="FormControl",n.forwardRef((e,t)=>{let{className:r,...n}=e,{formDescriptionId:a}=p();return(0,s.jsx)("p",{ref:t,id:a,className:(0,o.cn)("text-sm text-muted-foreground",r),...n})}).displayName="FormDescription";let j=n.forwardRef((e,t)=>{var r;let{className:n,children:a,...i}=e,{error:l,formMessageId:c}=p(),d=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):a;return d?(0,s.jsx)("p",{ref:t,id:c,className:(0,o.cn)("text-sm font-medium text-destructive",n),...i,children:d}):null});j.displayName="FormMessage"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(57437),n=r(2265),a=r(93448);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},37974:function(e,t,r){"use strict";let s;r.d(t,{h:function(){return c}});var n=r(2265),a=r(43301),i=r(738),o=r(40257);let l={apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:o.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:o.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:o.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:o.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};function c(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(o.current||(o.current=(0,a.v0)(s)),!o.current)return;let e=(0,a.Aj)(o.current,e=>{t(e),i(!1)});return()=>e()},[]),{user:e,loading:r,auth:o.current}}s=(0,i.C6)().length?(0,i.Mq)():(0,i.ZF)(l)},23340:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var s=r(2265);let n=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},71837:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});let s="https://api.hustloop.com"},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(61994),n=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[9990,8415,2984,3761,2971,2117,1744],function(){return e(e.s=12176)}),_N_E=e.O()}]);