(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9794],{12176:function(e,t,r){Promise.resolve().then(r.bind(r,89285))},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(43168).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},89285:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var s=r(57437),a=r(2265),i=r(99376),n=r(29501),o=r(13590),l=r(91115),c=r(37974),d=r(43301),u=r(79820),m=r(12381),f=r(40279),h=r(50935),x=r(51817),p=r(99388),g=r(41671),v=r(23340),j=r(33145),y=r(71837);function w(e,t){switch(e){case"auth/invalid-action-code":case"invalid-action-code":return"This verification link is invalid or has already been used.";case"auth/expired-action-code":case"expired-action-code":return"This verification link has expired. Please request a new one.";case"auth/user-not-found":case"user-not-found":return"No account found with this email.";case"auth/too-many-requests":case"too-many-requests":return"Too many attempts. Please try again later.";default:return t}}let b=l.Ry({password:l.Z_().min(10,{message:"Password must be at least 10 characters long."}).regex(/[A-Z]/,{message:"Must contain at least one uppercase letter."}).regex(/[a-z]/,{message:"Must contain at least one lowercase letter."}).regex(/[0-9]/,{message:"Must contain at least one number."}).regex(/[^A-Za-z0-9]/,{message:"Must contain at least one special character."}),confirmPassword:l.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]}),N=l.Ry({email:l.Z_().email({message:"Please enter a valid email address."})}),S=()=>{let{toast:e}=(0,v.pm)(),t=(0,i.useRouter)(),r=(0,n.cI)({resolver:(0,o.F)(N)}),a=async r=>{try{let s=await fetch("".concat(y.C,"/api/resend-verification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await s.json();if(s.ok)e({title:"Email Sent",description:a.message}),t.push("/");else{let t=a.error;t&&t.toLowerCase().includes("already verified")&&(t="This email is already verified. Please log in."),e({variant:"destructive",title:"Failed to send",description:t})}}catch(t){e({variant:"destructive",title:"Network Error",description:"Could not connect to the server."})}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Link Expired or Invalid"}),(0,s.jsx)(u.SZ,{children:"This verification link has expired. Please enter your email to receive a new one."})]}),(0,s.jsx)(u.aY,{children:(0,s.jsx)(h.l0,{...r,children:(0,s.jsxs)("form",{onSubmit:r.handleSubmit(a),className:"space-y-4",children:[(0,s.jsx)(h.Wi,{control:r.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(h.xJ,{children:[(0,s.jsx)(h.lX,{children:"Email"}),(0,s.jsx)(h.NI,{children:(0,s.jsx)(f.I,{type:"email",placeholder:"you@example.com",...t})}),(0,s.jsx)(h.zG,{})]})}}),(0,s.jsxs)(m.z,{type:"submit",className:"w-full",disabled:r.formState.isSubmitting,children:[r.formState.isSubmitting&&(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Resend Verification Link"]})]})})})]})},k=()=>{let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{toast:r}=(0,v.pm)(),{auth:l}=(0,c.h)(),[j,N]=a.useState(null),[k,E]=a.useState(null),[C,I]=a.useState(!0),[T,P]=a.useState(null),[_,R]=a.useState(!1),[A,z]=a.useState(null),[O,Z]=a.useState(!1),[F,V]=a.useState(!1),[M,D]=a.useState(!1),[G,Y]=a.useState(""),[L,q]=a.useState(!1),[W,X]=a.useState(null),[J,B]=a.useState(""),H=(0,n.cI)({resolver:(0,o.F)(b)}),U=async e=>{if(l&&k)try{await (0,d.LG)(l,k,e.password),Z(!0)}catch(e){P("Failed to reset password. The link may have expired. Please try again.")}};return(a.useEffect(()=>{let e=t.getAll("mode")[0],r=t.get("oobCode");if(N(e),E(r),!l||!e||!r){l||I(!1),e&&r||(P("This link is invalid, expired, or has already been used. Please log in or request a new verification email."),I(!1));return}(async()=>{try{let e=await (0,d.bX)(l,r),{operation:t}=e,{email:s}=e.data;if(!s)throw Error("Invalid action code: email is missing.");if("VERIFY_EMAIL"===t)await (0,d.iA)(l,r),Z(!0),z({email:s,from:"verifyEmail"});else if("PASSWORD_RESET"===t)await (0,d.TX)(l,r),z({email:s,from:"resetPassword"});else throw Error("Unsupported action.")}catch(e){"auth/invalid-action-code"===e.code?R(!0):P("An unexpected error occurred. Please try again.")}finally{I(!1)}})()},[t,l]),a.useEffect(()=>{if(O&&(null==A?void 0:A.from)==="verifyEmail"){let t=localStorage.getItem("token");t?(V(!0),(async()=>{try{let s=await fetch("".concat(y.C,"/api/check-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),a=await s.json();s.ok&&a.profile_complete?(r({title:"Email Verified!",description:"Your account is now active. You can log in."}),e.push("/?action=login&from=verification_success")):a.token?(r({title:"Email Verified!",description:"Please complete your profile to continue."}),e.push("/complete-profile?token=".concat(a.token))):(r({title:"Email Verified!",description:"Please complete your profile to continue."}),e.push("/"))}catch(t){r({title:"Email Verified!",description:"Please log in."}),e.push("/?action=login&from=verification_success")}finally{V(!1)}})()):D(!0)}},[O,A,e,r]),C)?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Verifying link..."})]}):_?(0,s.jsx)(S,{}):T?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(p.Z,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Action Failed"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:T}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,s.jsx)(m.z,{onClick:()=>e.push("/"),variant:"secondary",children:"Go to Homepage"}),(0,s.jsx)(m.z,{onClick:()=>e.push("/?action=login"),variant:"default",children:"Go to Login"}),(0,s.jsx)(m.z,{onClick:()=>R(!0),variant:"outline",children:"Resend Verification Email"})]})]}):M?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(g.Z,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Email Verified!"}),(0,s.jsx)("p",{className:"mb-6",children:"Your email has been verified successfully. You can now log in."}),(0,s.jsx)(m.z,{onClick:()=>e.push("/?action=login"),children:"Go to Login"})]}):"resetPassword"===j&&A?(0,s.jsxs)("div",{children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Reset Your Password"}),(0,s.jsxs)(u.SZ,{children:["Enter a new password for ",A.email]})]}),(0,s.jsx)(u.aY,{children:(0,s.jsx)(h.l0,{...H,children:(0,s.jsxs)("form",{onSubmit:H.handleSubmit(U),className:"space-y-4",children:[(0,s.jsx)(h.Wi,{control:H.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(h.xJ,{children:[(0,s.jsx)(h.lX,{children:"New Password"}),(0,s.jsx)(h.NI,{children:(0,s.jsx)(f.I,{type:"password",...t})}),(0,s.jsx)(h.zG,{})]})}}),(0,s.jsx)(h.Wi,{control:H.control,name:"confirmPassword",render:e=>{let{field:t}=e;return(0,s.jsxs)(h.xJ,{children:[(0,s.jsx)(h.lX,{children:"Confirm New Password"}),(0,s.jsx)(h.NI,{children:(0,s.jsx)(f.I,{type:"password",...t})}),(0,s.jsx)(h.zG,{})]})}}),(0,s.jsxs)(m.z,{type:"submit",className:"w-full",disabled:H.formState.isSubmitting,children:[H.formState.isSubmitting&&(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save New Password"]})]})})})]}):O||M||C||_||T||"resetPassword"===j&&A?void 0:(0,s.jsx)("div",{className:"text-center flex flex-col items-center justify-center min-h-[60vh]",children:(0,s.jsxs)(u.Zb,{className:"w-full max-w-md p-6",children:[(0,s.jsxs)(u.Ol,{className:"text-center",children:[(0,s.jsx)(u.ll,{children:"Check or Resend Email Verification"}),(0,s.jsx)(u.SZ,{children:"Enter your email to check if it has been verified. If not, you can resend the verification link."})]}),(0,s.jsxs)(u.aY,{children:[(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),q(!0),X(null),B("");try{let e=await fetch("".concat(y.C,"/api/check-verification-status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:G})}),t=await e.json();e.ok&&t.email_verified?X("verified"):e.ok&&!t.email_verified?X("not_verified"):(X("error"),B(w(t.code,t.error||"Unknown error")))}catch(e){X("error"),B("Network error")}finally{q(!1)}},className:"space-y-4",children:[(0,s.jsx)(f.I,{type:"email",placeholder:"you@example.com",value:G,onChange:e=>Y(e.target.value),required:!0}),(0,s.jsx)(m.z,{type:"submit",className:"w-full",disabled:L,children:L?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):"Check Verification Status"})]}),"verified"===W&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(g.Z,{className:"h-8 w-8 text-green-500 mx-auto mb-2 animate-pop"}),(0,s.jsx)("p",{className:"font-semibold text-green-700",children:"Your email is verified! Please log in."}),(0,s.jsx)(m.z,{className:"mt-2 w-full",size:"lg",onClick:()=>e.push("/?action=login"),children:"Go to Login"})]}),"not_verified"===W&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(p.Z,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),(0,s.jsx)("p",{className:"font-semibold",children:"Your email is not verified yet."}),(0,s.jsx)(m.z,{className:"mt-2 w-full",variant:"outline",onClick:async()=>{q(!0),B("");try{let e=await fetch("".concat(y.C,"/api/resend-verification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:G})}),t=await e.json();e.ok?X("resent"):B(w(t.code,t.error||"Failed to resend verification email."))}catch(e){B("Network error")}finally{q(!1)}},children:"Resend Verification Email"})]}),"resent"===W&&(0,s.jsxs)("div",{className:"mt-4 text-green-700",children:[(0,s.jsx)(g.Z,{className:"h-8 w-8 text-green-500 mx-auto mb-2 animate-pop"}),(0,s.jsx)("p",{className:"font-semibold",children:"Verification email resent! Please check your inbox."})]}),"error"===W&&(0,s.jsx)("div",{className:"mt-4 text-destructive",children:J}),(0,s.jsx)(m.z,{onClick:()=>e.push("/"),className:"mt-4 w-full",variant:"secondary",children:"Go to Homepage"})]})]})})};function E(){let e=(0,i.useRouter)();return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer mb-8",onClick:()=>e.push("/"),children:[(0,s.jsx)("div",{className:"logo-container",style:{"--logo-size":"2.5rem"},children:(0,s.jsx)(j.default,{src:"/logo.png",alt:"Hustloop Logo",width:40,height:40,className:"h-10 w-10 logo-image"})}),(0,s.jsxs)("span",{className:"font-headline text-2xl",style:{color:"#facc15"},children:["hustl",(0,s.jsx)("strong",{className:"text-3xl align-middle font-bold",children:"∞"}),"p"]})]}),(0,s.jsx)(u.Zb,{className:"w-full max-w-md",children:(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,s.jsx)(x.Z,{className:"h-12 w-12 animate-spin text-primary"})}),children:(0,s.jsx)(k,{})})})]})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(57437),a=r(2265),i=r(37053),n=r(90535),o=r(93448);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:a,size:n,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var s=r(57437),a=r(2265),i=r(93448);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},50935:function(e,t,r){"use strict";r.d(t,{l0:function(){return u},NI:function(){return v},Wi:function(){return f},xJ:function(){return p},lX:function(){return g},zG:function(){return j}});var s=r(57437),a=r(2265),i=r(37053),n=r(29501),o=r(93448),l=r(6394);let c=(0,r(90535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,o.cn)(c(),r),...a})});d.displayName=l.f.displayName;let u=n.RV,m=a.createContext({}),f=e=>{let{...t}=e;return(0,s.jsx)(m.Provider,{value:{name:t.name},children:(0,s.jsx)(n.Qr,{...t})})},h=()=>{let e=a.useContext(m),t=a.useContext(x),{getFieldState:r,formState:s}=(0,n.Gc)(),i=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...i}},x=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:r,...i}=e,n=a.useId();return(0,s.jsx)(x.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...i})})});p.displayName="FormItem";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:i,formItemId:n}=h();return(0,s.jsx)(d,{ref:t,className:(0,o.cn)(i&&"text-destructive",r),htmlFor:n,...a})});g.displayName="FormLabel";let v=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:n,formDescriptionId:o,formMessageId:l}=h();return(0,s.jsx)(i.g7,{ref:t,id:n,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...r})});v.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:i}=h();return(0,s.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let j=a.forwardRef((e,t)=>{var r;let{className:a,children:i,...n}=e,{error:l,formMessageId:c}=h(),d=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):i;return d?(0,s.jsx)("p",{ref:t,id:c,className:(0,o.cn)("text-sm font-medium text-destructive",a),...n,children:d}):null});j.displayName="FormMessage"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var s=r(57437),a=r(2265),i=r(93448);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},37974:function(e,t,r){"use strict";let s;r.d(t,{h:function(){return o}});var a=r(2265),i=r(43301),n=r(738);function o(){let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(o.current||(o.current=(0,i.v0)(s)),!o.current)return;let e=(0,i.Aj)(o.current,e=>{t(e),n(!1)});return()=>e()},[]),{user:e,loading:r,auth:o.current}}s=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyBw7SxFgACSo_BqMiwpl_Wmha1yljkhVhc",authDomain:"hustloop.firebaseapp.com",projectId:"hustloop",storageBucket:"hustloop.firebasestorage.app",messagingSenderId:"1059618765323",appId:"1:1059618765323:web:443c3e836dc18dd5dba50e",measurementId:"G-G1YRLQ771T"})},23340:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var s=r(2265);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},71837:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});let s="https://api.hustloop.com"},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var s=r(61994),a=r(53335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}}},function(e){e.O(0,[9990,8415,2984,3145,3761,2971,2117,1744],function(){return e(e.s=12176)}),_N_E=e.O()}]);