"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3083],{13083:function(e,s,t){t.r(s),t.d(s,{default:function(){return B}});var r=t(57437),l=t(2265),i=t(29501),n=t(13590),a=t(91115),o=t(74291),c=t(17168),d=t(79820),m=t(48508),x=t(56940),h=t(97059),u=t(62994),j=t(69349),p=t(31004),b=t(91723),f=t(41671),g=t(78867),N=t(99388),v=t(25466),y=t(48736),w=t(92369),S=t(98728),z=t(18930),k=t(26937),Z=t(51817),C=t(90641),I=t(12381),A=t(50935),O=t(40279),J=t(31593),P=t(23675),q=t(23340),E=t(62775),M=t(71837),W=t(46165);let F=a.z.object({name:a.z.string().min(1,"Company name is required"),sector:a.z.string().min(1,"Sector is required"),description:a.z.string().min(1,"A short description is required"),details:a.z.object({about:a.z.string().min(1,"About section is required"),scope:a.z.array(a.z.object({value:a.z.string().min(1,"Scope item cannot be empty")})).min(1,"At least one scope item is required"),lookingFor:a.z.string().min(1,"This field is required"),benefits:a.z.array(a.z.object({value:a.z.string().min(1,"Benefit cannot be empty")})).min(1,"At least one benefit is required"),contact:a.z.object({name:a.z.string().min(1,"Contact name is required"),title:a.z.string().min(1,"Contact title is required")})})}),G=a.z.object({name:a.z.string().min(1,"Name is required"),email:a.z.string().email("Invalid email address")}),Y=[],D={New:(0,r.jsx)(b.Z,{className:"h-4 w-4 text-blue-500"}),"Under Review":(0,r.jsx)(b.Z,{className:"h-4 w-4 text-yellow-500"}),Valid:(0,r.jsx)(f.Z,{className:"h-4 w-4 text-green-500"}),Duplicate:(0,r.jsx)(g.Z,{className:"h-4 w-4 text-orange-500"}),Rejected:(0,r.jsx)(N.Z,{className:"h-4 w-4 text-red-500"})},X={name:"",sector:"",description:"",details:{about:"",scope:[],lookingFor:"",benefits:[],contact:{name:"",title:""}}};function B(e){let{isOpen:s,onOpenChange:t,user:a,authProvider:g}=e,{toast:N}=(0,q.pm)(),[B,V]=(0,l.useState)("overview"),[K,R]=(0,l.useState)(Y),[_,L]=(0,l.useState)(null),[$,Q]=(0,l.useState)(!1),H=(0,i.cI)({resolver:(0,n.F)(F),defaultValues:X}),ee=(0,i.cI)({resolver:(0,n.F)(G),defaultValues:{name:a.name,email:a.email}}),{fields:es,append:et,remove:er}=(0,i.Dq)({control:H.control,name:"details.scope"}),{fields:el,append:ei,remove:en}=(0,i.Dq)({control:H.control,name:"details.benefits"});async function ea(e){let s=localStorage.getItem("token"),t={...e,details:{...e.details,scope:e.details.scope.map(e=>e.value),benefits:e.details.benefits.map(e=>e.value)},logo:"https://placehold.co/100x100.png",hint:"company building"};try{let e=await fetch("".concat(M.C,"/api/msme-profile"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)});if(e.ok)N({title:"Profile Created",description:"Your public MSME profile has been saved and is now visible."});else{let s=await e.json();N({variant:"destructive",title:"Failed to save profile",description:s.error||"An unknown error occurred."})}}catch(e){N({variant:"destructive",title:"Network Error",description:"Could not save profile. Please try again later."})}}async function eo(e){let s=localStorage.getItem("token");if(!s){N({variant:"destructive",title:"Authentication Error",description:"Please log in again."});return}try{let t=await fetch("".concat(M.C,"/api/update-profile"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(e)}),r=await t.json();t.ok?(N({title:"Settings Saved",description:r.message}),localStorage.setItem("user",JSON.stringify(r.user))):N({variant:"destructive",title:"Update Failed",description:r.error||"An unknown error occurred."})}catch(e){N({variant:"destructive",title:"Network Error",description:"Could not save settings. Please try again later."})}}let ec={new:K.filter(e=>"New"===e.status).length,review:K.filter(e=>"Under Review"===e.status).length,valid:K.filter(e=>"Valid"===e.status).length};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Vq,{open:s,onOpenChange:t,children:(0,r.jsxs)(o.cZ,{className:"sm:max-w-6xl h-[90vh] flex flex-col p-0",children:[(0,r.jsxs)(o.fK,{className:"p-6",children:[(0,r.jsx)(o.$N,{className:"text-3xl font-bold font-headline",children:"MSME Dashboard"}),(0,r.jsxs)(o.Be,{children:["Welcome, ",a.name,". Manage your challenges, submissions, and profile."]})]}),(0,r.jsx)("div",{className:"flex-grow flex flex-col min-h-0 p-6 pt-0",children:(0,r.jsxs)(c.mQ,{value:B,onValueChange:e=>V(e),className:"flex flex-col flex-grow min-h-0",children:[(0,r.jsxs)(c.dr,{className:"justify-start",children:[(0,r.jsxs)(c.SP,{value:"overview",children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"})," Overview"]}),(0,r.jsxs)(c.SP,{value:"submissions",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"})," Submissions"]}),(0,r.jsxs)(c.SP,{value:"profile",children:[(0,r.jsx)(w.Z,{className:"mr-2 h-4 w-4"})," Edit Profile"]}),(0,r.jsxs)(c.SP,{value:"settings",children:[(0,r.jsx)(S.Z,{className:"mr-2 h-4 w-4"})," Settings"]})]}),(0,r.jsxs)(C.x,{className:"flex-grow mt-4",children:[(0,r.jsxs)(c.nU,{value:"overview",className:"mt-0 space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,r.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[(0,r.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ll,{className:"text-sm font-medium",children:"New Submissions"}),(0,r.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:ec.new}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting review"})]})]}),(0,r.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[(0,r.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ll,{className:"text-sm font-medium",children:"Under Review"}),(0,r.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:ec.review}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently being evaluated"})]})]}),(0,r.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[(0,r.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ll,{className:"text-sm font-medium",children:"Accepted Solutions"}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:ec.valid}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Marked as valid for collaboration"})]})]})]}),(0,r.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsx)(d.ll,{children:"Solutions Overview"}),(0,r.jsx)(d.SZ,{children:"Accepted solutions over the last 6 months."})]}),(0,r.jsx)(d.aY,{children:(0,r.jsx)(p.BO,{config:T,className:"h-[250px] w-full",children:(0,r.jsxs)(m.v,{data:U,children:[(0,r.jsx)(x.q,{vertical:!1}),(0,r.jsx)(h.K,{dataKey:"month",tickLine:!1,tickMargin:10,axisLine:!1}),(0,r.jsx)(u.B,{}),(0,r.jsx)(p.h7,{cursor:!1,content:(0,r.jsx)(p.dg,{})}),(0,r.jsx)(j.$,{dataKey:"solutions",fill:"var(--color-solutions)",radius:4})]})})})]})]}),(0,r.jsx)(c.nU,{value:"submissions",className:"mt-0 space-y-4",children:K.length>0?K.map(e=>(0,r.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50 hover:border-primary/50 cursor-pointer transition-colors",onClick:()=>L(e),children:[(0,r.jsx)(d.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.ll,{className:"text-lg",children:e.idea}),(0,r.jsxs)(d.SZ,{children:["Submitted by ",e.founder]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[D[e.status],(0,r.jsx)("span",{children:e.status})]})]})}),(0,r.jsx)(d.eW,{children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Submitted on ",e.submittedDate]})})]},e.id)):(0,r.jsx)(d.Zb,{className:"text-center text-muted-foreground py-16",children:(0,r.jsx)(d.aY,{children:"You have not received any submissions yet."})})}),(0,r.jsx)(c.nU,{value:"profile",className:"mt-0",children:(0,r.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsx)(d.ll,{children:"Create/Edit MSME Profile"}),(0,r.jsx)(d.SZ,{children:"This information will be publicly visible to potential collaborators."})]}),(0,r.jsx)(d.aY,{children:(0,r.jsx)(A.l0,{...H,children:(0,r.jsxs)("form",{onSubmit:H.handleSubmit(ea),className:"space-y-8",children:[(0,r.jsx)(A.Wi,{control:H.control,name:"name",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Company Name"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:H.control,name:"sector",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Sector"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:H.control,name:"description",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Short Description"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(P.g,{placeholder:"A brief one-sentence pitch for your company.",...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(J.Z,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Collaboration Details"}),(0,r.jsx)(A.Wi,{control:H.control,name:"details.about",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"About Your Company"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(P.g,{rows:5,placeholder:"Describe your company, its mission, and what it does.",...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:H.control,name:"details.lookingFor",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"What you're looking for"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(P.g,{rows:3,placeholder:"Describe the ideal partner or solution you are seeking.",...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-medium mb-2",children:"Scope of Collaboration"}),es.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(A.Wi,{control:H.control,name:"details.scope.".concat(s,".value"),render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{className:"flex-grow",children:[(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{placeholder:"e.g., E-commerce Strategy",...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(I.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>er(s),children:(0,r.jsx)(z.Z,{className:"h-4 w-4 text-destructive"})})]},e.id)),(0,r.jsxs)(I.z,{type:"button",variant:"outline",size:"sm",onClick:()=>et({value:""}),children:[(0,r.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Add Scope Item"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-medium mb-2",children:"Benefits of Partnership"}),el.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(A.Wi,{control:H.control,name:"details.benefits.".concat(s,".value"),render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{className:"flex-grow",children:[(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{placeholder:"e.g., Access to our distribution network",...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(I.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>en(s),children:(0,r.jsx)(z.Z,{className:"h-4 w-4 text-destructive"})})]},e.id)),(0,r.jsxs)(I.z,{type:"button",variant:"outline",size:"sm",onClick:()=>ei({value:""}),children:[(0,r.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Add Benefit"]})]}),(0,r.jsx)(J.Z,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Contact Person"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(A.Wi,{control:H.control,name:"details.contact.name",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Name"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:H.control,name:"details.contact.title",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Title"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{...s})}),(0,r.jsx)(A.zG,{})]})}})]}),(0,r.jsxs)(I.z,{type:"submit",disabled:H.formState.isSubmitting,children:[H.formState.isSubmitting&&(0,r.jsx)(Z.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Profile"]})]})})})]})}),(0,r.jsx)(c.nU,{value:"settings",className:"mt-0",children:(0,r.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsx)(d.ll,{children:"Account Settings"}),(0,r.jsx)(d.SZ,{children:"Manage your account settings."})]}),(0,r.jsxs)(d.aY,{className:"space-y-8",children:[(0,r.jsx)(A.l0,{...ee,children:(0,r.jsxs)("form",{onSubmit:ee.handleSubmit(eo),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Profile"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(A.Wi,{control:ee.control,name:"name",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Full Name"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{placeholder:"Your full name",...s})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:ee.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(A.lX,{children:"Email"}),!$&&(0,r.jsx)(I.z,{type:"button",variant:"link",className:"p-0 h-auto text-sm",onClick:()=>Q(!0),children:"Edit"})]}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(O.I,{type:"email",placeholder:"your@email.com",...s,readOnly:!$})}),(0,r.jsx)(A.zG,{})]})}})]})]}),(0,r.jsx)(I.z,{type:"submit",children:"Save Changes"})]})}),"local"===g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.Z,{}),(0,r.jsx)(W.Z,{})]})]})]})})]})]})})]})}),(0,r.jsx)(E.Z,{submission:_,onOpenChange:e=>!e&&L(null),onAddComment:(e,s)=>{let t={author:"MSME",text:s,timestamp:"Just now"},r=K.map(s=>s.id===e?{...s,comments:[...s.comments,t]}:s);R(r),L(r.find(s=>s.id===e)||null)}})]})}let U=[{month:"January",solutions:0},{month:"February",solutions:0},{month:"March",solutions:0},{month:"April",solutions:0},{month:"May",solutions:0},{month:"June",solutions:0}],T={solutions:{label:"Solutions",color:"hsl(var(--chart-3))"}}}}]);